(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{23:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(16),c=t.n(r),a=t(17),o=t(3),i=t(1),u=t(0),l=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(u.jsxs)("div",{children:[" filter shown with: ",Object(u.jsx)("input",{value:n,onChange:t})]})},s=(t(23),function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"error",children:n})}),d=function(e){var n=e.addPerson,t=e.newName,r=e.handlePersonChange,c=e.newNumber,a=e.handleNumberChange;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:r})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:c,onChange:a})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})})},h=function(e){var n=e.personsToShow,t=e.deletePerson;return Object(u.jsx)("div",{children:Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsx)("div",{children:Object(u.jsxs)("li",{children:[e.name," ",e.number," ",Object(u.jsx)("button",{onClick:function(){t(e.id,e.name)},children:"delete"})]})},e.id)}))})})},f=t(5),j=t.n(f),b="/api/persons",m={getAll:function(){return j.a.get(b).then((function(e){return e.data}))},create:function(e){return j.a.post(b,e).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},del:function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))}},v=function(){var e=Object(i.useState)(""),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(i.useState)(""),f=Object(o.a)(c,2),j=f[0],b=f[1],v=Object(i.useState)(""),O=Object(o.a)(v,2),g=O[0],p=O[1],x=Object(i.useState)(!0),w=Object(o.a)(x,2),C=w[0],S=w[1],N=Object(i.useState)([]),P=Object(o.a)(N,2),T=P[0],k=P[1],y=Object(i.useState)(null),F=Object(o.a)(y,2),A=F[0],D=F[1];Object(i.useEffect)((function(){m.getAll().then((function(e){k(e)}))}),[]);var E=C?T:T.filter((function(e){return e.name.toLowerCase().includes(g.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(s,{message:A}),Object(u.jsx)(l,{newFilter:g,handleFilterChange:function(e){p(e.target.value),S()}}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(d,{addPerson:function(e){e.preventDefault();var n=void m.getAll().then((function(e){return e.length<0?e[e.length-1].id:0===e.length?0:void 0})),c={name:t,number:j,id:n+1};if(!0===function(e,n){for(var t=0,r=0;!0!==t&&r<n.length;)t=n[r].name===e.name,r++;return t}(c,T)){var o=function(e,n){for(var t=[],r=0;r<n.length;r++)if(!0===(n[r].name===e.name))return t.push(r),t;return t}(c,T),i="".concat(c.name," is already added to phonebook, replace the old number with a new one?");if(!0===window.confirm(i)&&o.length>0){var u=T[o].id;m.update(u,c).then((function(e){var n=Object(a.a)(T);n[o[0]]=e,k(n),r(""),b("");var t="".concat(c.name," number replaced");D(t),setTimeout((function(){D(null)}),5e3)})).catch((function(e){console.log("error message:",e),console.log("error",c),k(T.filter((function(e){return e.id!==u})));var n="Information of ".concat(c.name," has already been removed from server");D(n),setTimeout((function(){D(null)}),5e3)}))}}else{var l="".concat(c.name," created");D(l),setTimeout((function(){D(null)}),5e3),m.create(c).then((function(e){k(T.concat(e)),r("")})).catch((function(e){alert("the person was already deleted from server"),k(T.filter((function(e){return e.id!==c.id})))})),r(""),b("")}},newName:t,handlePersonChange:function(e){r(e.target.value)},newNumber:j,handleNumberChange:function(e){b(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(h,{personsToShow:E,deletePerson:function(e,n){var t="Delete ".concat(n,"?");if(!0===window.confirm(t)){var r="".concat(n," deleted");D(r),setTimeout((function(){D(null)}),5e3),m.del(e).then((function(n){k(T.filter((function(n){return n.id!==e})))})).catch((function(n){console.log(n),k(T.filter((function(n){return n.id!==e})))}))}}})]})};c.a.render(Object(u.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.aaffb7de.chunk.js.map